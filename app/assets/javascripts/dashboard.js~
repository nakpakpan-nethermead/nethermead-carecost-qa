$(function() {
    	
    $('#category_consumer_name').on('keyup', function(){
        var input_val = $(this).val();
        var conditions = $('#condition_list').val().split(',');
        var procedures = $('#procedure_list').val().split(',');
        var custome_data = [];
        for (var i in conditions) {
            var con = conditions[i].split("|")[0];
            var con_codset = conditions[i].split("|")[1];
            for (var j in procedures) {
                var proc_codeset = procedures[j].split("|")[1];
                if(con_codset == proc_codeset )
                {
                    var proc = procedures[j].split("|")[0];
                    custome_data.push({label: con + ':' + proc, category: "Diagnosis:" + con});
                }
            }
        }

        for (var i in procedures) {
            var proc = procedures[i].split("|")[0];
            custome_data.push({label: proc, category: "Procedures"});
        }

        $( "#category_consumer_name" ).catcomplete({
            delay: 0,
            source: custome_data
        });
    });
    
    $('#map_view').hide();

    $('#btn_map_view').on('click', function(){
        $('#list_view').hide();
        $('#map_view').show();
        $(this).css('background','#3d4753');
        $(this).toggleClass('red')
    });

    $('#btn_list_view').on('click', function(){
        $('#map_view').hide();
        $('#list_view').show();
        $(this).css('background','#3d4753');
    });

    
    //Multiselect functionality
    $("select").multiselect({});
});
